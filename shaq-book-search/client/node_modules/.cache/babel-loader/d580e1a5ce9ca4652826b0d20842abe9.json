{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import BookCard from\"../BookCard\";import Container from\"../Container\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchForm=function SearchForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),books=_useState4[0],setBooks=_useState4[1];var fetchBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var queryURL,response,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(search.length<3)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:e.preventDefault();queryURL=\"https://www.googleapis.com/books/v1/volumes?q=\".concat(search);_context.next=6;return fetch(queryURL);case 6:response=_context.sent;_context.next=9;return response.json();case 9:payload=_context.sent;setBooks(payload.items||[]);setSearch(\"\");case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchBooks(_x){return _ref.apply(this,arguments);};}();var postBooks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(book){var queryURL,config,response,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:queryURL=\"/api/books\";config={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(book)};_context2.next=4;return fetch(queryURL,config);case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:payload=_context2.sent;return _context2.abrupt(\"return\",payload);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function postBooks(_x2){return _ref2.apply(this,arguments);};}();var saveBook=function saveBook(book){var newSavedBook={description:book.volumeInfo.description,image:book.volumeInfo.imageLinks?book.volumeInfo.imageLinks.thumbnail:\"https://picsum.photos/200/300\",link:book.volumeInfo.previewLink,title:book.volumeInfo.title,authors:book.volumeInfo.authors};postBooks(newSavedBook);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Book Search\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"mb-2 mr-sm-2\",placeholder:\"Enter author or title\",size:\"lg\",type:\"text\",value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mb-2\",onClick:fetchBooks,children:\"Search\"})]}),books.length?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Your Results\"}),/*#__PURE__*/_jsx(BookCard,{books:books,saveBook:saveBook})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Your search results will appear below.\"})]});};export default SearchForm;","map":{"version":3,"sources":["/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/src/components/SearchForm/index.js"],"names":["React","useState","Button","Form","BookCard","Container","SearchForm","search","setSearch","books","setBooks","fetchBooks","e","length","preventDefault","queryURL","fetch","response","json","payload","items","postBooks","book","config","method","headers","Accept","body","JSON","stringify","saveBook","newSavedBook","description","volumeInfo","image","imageLinks","thumbnail","link","previewLink","title","authors","target","value"],"mappings":"0jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,C,6IAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,cAA4BL,QAAQ,CAAC,EAAD,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eACA,eAA0BP,QAAQ,CAAC,EAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,UAAU,0FAAG,iBAAOC,CAAP,qJACbL,MAAM,CAACM,MAAP,CAAgB,CADH,kEAEjBD,CAAC,CAACE,cAAF,GACMC,QAHW,yDAGiDR,MAHjD,wBAIMS,CAAAA,KAAK,CAACD,QAAD,CAJX,QAIXE,QAJW,qCAKKA,CAAAA,QAAQ,CAACC,IAAT,EALL,QAKXC,OALW,eAMjBT,QAAQ,CAACS,OAAO,CAACC,KAAR,EAAiB,EAAlB,CAAR,CACAZ,SAAS,CAAC,EAAD,CAAT,CAPiB,uDAAH,kBAAVG,CAAAA,UAAU,4CAAhB,CAUA,GAAMU,CAAAA,SAAS,2FAAG,kBAAOC,IAAP,2JACVP,QADU,cAEVQ,MAFU,CAED,CACbC,MAAM,CAAE,MADK,CAEbC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAFI,CAMbC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf,CANO,CAFC,wBAUON,CAAAA,KAAK,CAACD,QAAD,CAAWQ,MAAX,CAVZ,QAUVN,QAVU,uCAWMA,CAAAA,QAAQ,CAACC,IAAT,EAXN,QAWVC,OAXU,iDAYTA,OAZS,0DAAH,kBAATE,CAAAA,SAAS,8CAAf,CAeA,GAAMS,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACR,IAAD,CAAU,CACzB,GAAMS,CAAAA,YAAY,CAAG,CACnBC,WAAW,CAAEV,IAAI,CAACW,UAAL,CAAgBD,WADV,CAEnBE,KAAK,CAAEZ,IAAI,CAACW,UAAL,CAAgBE,UAAhB,CACHb,IAAI,CAACW,UAAL,CAAgBE,UAAhB,CAA2BC,SADxB,CAEH,+BAJe,CAKnBC,IAAI,CAAEf,IAAI,CAACW,UAAL,CAAgBK,WALH,CAMnBC,KAAK,CAAEjB,IAAI,CAACW,UAAL,CAAgBM,KANJ,CAOnBC,OAAO,CAAElB,IAAI,CAACW,UAAL,CAAgBO,OAPN,CAArB,CASAnB,SAAS,CAACU,YAAD,CAAT,CACD,CAXD,CAaA,mBAEE,MAAC,SAAD,yBACE,MAAC,IAAD,yBACE,mCADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,SAAS,CAAC,cADZ,CAEE,WAAW,CAAC,uBAFd,CAGE,IAAI,CAAC,IAHP,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAExB,MALT,CAME,QAAQ,CAAE,kBAACK,CAAD,QAAOJ,CAAAA,SAAS,CAACI,CAAC,CAAC6B,MAAF,CAASC,KAAV,CAAhB,EANZ,EAFF,cAUE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,MAAhC,CAAuC,OAAO,CAAE/B,UAAhD,oBAVF,GADF,CAeGF,KAAK,CAACI,MAAN,cACC,wCACE,oCADF,cAEE,KAAC,QAAD,EAAU,KAAK,CAAEJ,KAAjB,CAAwB,QAAQ,CAAEqB,QAAlC,EAFF,GADD,cAMC,6DArBJ,GAFF,CA0BD,CApED,CAsEA,cAAexB,CAAAA,UAAf","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport BookCard from \"../BookCard\";\nimport Container from \"../Container\"\n\nconst SearchForm = () => {\n  const [search, setSearch] = useState(\"\");\n  const [books, setBooks] = useState([]);\n\n  const fetchBooks = async (e) => {\n    if (search.length < 3) return;\n    e.preventDefault();\n    const queryURL = `https://www.googleapis.com/books/v1/volumes?q=${search}`;\n    const response = await fetch(queryURL);\n    const payload = await response.json();\n    setBooks(payload.items || []);\n    setSearch(\"\");\n  };\n\n  const postBooks = async (book) => {\n    const queryURL = `/api/books`;\n    const config = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(book),\n    };\n    const response = await fetch(queryURL, config);\n    const payload = await response.json();\n    return payload;\n  };\n\n  const saveBook = (book) => {\n    const newSavedBook = {\n      description: book.volumeInfo.description,\n      image: book.volumeInfo.imageLinks\n        ? book.volumeInfo.imageLinks.thumbnail\n        : \"https://picsum.photos/200/300\",\n      link: book.volumeInfo.previewLink,\n      title: book.volumeInfo.title,\n      authors: book.volumeInfo.authors,\n    };\n    postBooks(newSavedBook);\n  };\n\n  return (\n\n    <Container>\n      <Form>\n        <h2>Book Search</h2>\n        <Form.Control\n          className=\"mb-2 mr-sm-2\"\n          placeholder=\"Enter author or title\"\n          size=\"lg\"\n          type=\"text\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n        <Button type=\"submit\" className=\"mb-2\" onClick={fetchBooks}>\n          Search\n        </Button>\n      </Form>\n      {books.length ? (\n        <>\n          <h5>Your Results</h5>\n          <BookCard books={books} saveBook={saveBook} />\n        </>\n      ) : (\n        <p>Your search results will appear below.</p>)}\n    </Container>\n  );\n};\n\nexport default SearchForm;"]},"metadata":{},"sourceType":"module"}