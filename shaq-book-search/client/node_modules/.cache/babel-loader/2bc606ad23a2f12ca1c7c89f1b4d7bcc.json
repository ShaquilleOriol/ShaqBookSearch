{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Container from\"react-bootstrap/Container\";import Button from\"react-bootstrap/Button\";import Row from\"react-bootstrap/Row\";import Card from\"react-bootstrap/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SavedBookCard=function SavedBookCard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];useEffect(function(){var queryURL=\"/api/books\";var fetchBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(queryURL);case 2:response=_context.sent;_context.next=5;return response.json();case 5:payload=_context.sent;setBooks(payload||[]);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchBooks(){return _ref.apply(this,arguments);};}();fetchBooks();},[]);var deleteBook=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var queryURL,config,response,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBooks(books.filter(function(book){return book._id!==id;}));queryURL=\"/api/books/\".concat(id);config={method:\"DELETE\"};_context2.next=5;return fetch(queryURL,config);case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:payload=_context2.sent;return _context2.abrupt(\"return\",payload);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteBook(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Saved Books\"}),books.length>0?books.map(function(book){return/*#__PURE__*/_jsxs(Card,{style:{width:\"100%\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(Card.Img,{className:\"col-xs-4 col-sm-3 col-md-3 col-lg-3\",variant:\"top\",src:book.image?book.image:\"https://picsum.photos/200/300\"}),/*#__PURE__*/_jsxs(Card.Body,{className:\"col-xs-8 col-sm-9 col-md-9 col-lg-9\",children:[/*#__PURE__*/_jsx(Card.Title,{children:book.title}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Written by:\",\" \",book.authors&&book.authors.length>1?book.authors.join(\", \"):book.authors,book.description]}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",href:book.link,children:\"View on Google Books\"}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return deleteBook(book._id);},children:\"delete book\"})]})]},book._id);}):/*#__PURE__*/_jsx(\"p\",{children:\"Looks like you haven't saved any books yet. When you save your favourite books they will appear here.\"})]})});};export default SavedBookCard;","map":{"version":3,"sources":["/Users/shaquille/Desktop/codework/ShaqBookSearch/shaq-book-search/client/src/components/SavedBooksCard/index.js"],"names":["React","useState","useEffect","Container","Button","Row","Card","SavedBookCard","books","setBooks","queryURL","fetchBooks","fetch","response","json","payload","deleteBook","id","filter","book","_id","config","method","length","map","width","flexDirection","image","title","authors","join","description","link"],"mappings":"0jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eAEAP,SAAS,CAAC,UAAM,CACd,GAAMQ,CAAAA,QAAQ,CAAG,YAAjB,CACA,GAAMC,CAAAA,UAAU,0FAAG,8KACMC,CAAAA,KAAK,CAACF,QAAD,CADX,QACXG,QADW,qCAEKA,CAAAA,QAAQ,CAACC,IAAT,EAFL,QAEXC,OAFW,eAGjBN,QAAQ,CAACM,OAAO,EAAI,EAAZ,CAAR,CAHiB,sDAAH,kBAAVJ,CAAAA,UAAU,0CAAhB,CAKAA,UAAU,GACX,CARQ,CAQP,EARO,CAAT,CAUA,GAAMK,CAAAA,UAAU,2FAAG,kBAAOC,EAAP,2JACjBR,QAAQ,CAACD,KAAK,CAACU,MAAN,CAAa,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,GAAL,GAAaH,EAAvB,EAAb,CAAD,CAAR,CACMP,QAFW,sBAEcO,EAFd,EAGXI,MAHW,CAGF,CACbC,MAAM,CAAE,QADK,CAHE,wBAMMV,CAAAA,KAAK,CAACF,QAAD,CAAWW,MAAX,CANX,QAMXR,QANW,uCAOKA,CAAAA,QAAQ,CAACC,IAAT,EAPL,QAOXC,OAPW,iDAQVA,OARU,2DAAH,kBAAVC,CAAAA,UAAU,6CAAhB,CAWA,mBACA,KAAC,SAAD,wBACE,MAAC,GAAD,yBACI,mCADJ,CAEKR,KAAK,CAACe,MAAN,CAAe,CAAf,CACCf,KAAK,CAACgB,GAAN,CAAU,SAACL,IAAD,qBACR,MAAC,IAAD,EAAqB,KAAK,CAAE,CAAEM,KAAK,CAAE,MAAT,CAAiBC,aAAa,CAAE,KAAhC,CAA5B,wBACE,KAAC,IAAD,CAAM,GAAN,EAAU,SAAS,CAAC,qCAApB,CAA0D,OAAO,CAAC,KAAlE,CAAwE,GAAG,CAAGP,IAAI,CAACQ,KAAL,CAAaR,IAAI,CAACQ,KAAlB,CAA0B,+BAAxG,EADF,cAEE,MAAC,IAAD,CAAM,IAAN,EAAW,SAAS,CAAC,qCAArB,wBACE,KAAC,IAAD,CAAM,KAAN,WAAaR,IAAI,CAACS,KAAlB,EADF,cAEE,MAAC,IAAD,CAAM,IAAN,0BACc,GADd,CAEGT,IAAI,CAACU,OAAL,EAAgBV,IAAI,CAACU,OAAL,CAAaN,MAAb,CAAsB,CAAtC,CACCJ,IAAI,CAACU,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CADD,CAC2BX,IAAI,CAACU,OAHnC,CAIKV,IAAI,CAACY,WAJV,GAFF,cAQE,KAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,IAAI,CAAEZ,IAAI,CAACa,IAAvC,kCARF,CAQ6E,GAR7E,cASE,KAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,OAAO,CAAE,yBAAMhB,CAAAA,UAAU,CAACG,IAAI,CAACC,GAAN,CAAhB,EAAlC,yBATF,GAFF,GAAWD,IAAI,CAACC,GAAhB,CADQ,EAAV,CADD,cAkBG,4HApBR,GADF,EADA,CA2BD,CAnDD,CAqDA,cAAeb,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Card from \"react-bootstrap/Card\";\n\nconst SavedBookCard = () => {\n  const [books, setBooks] = useState([]);\n\n  useEffect(() => {\n    const queryURL = \"/api/books\";\n    const fetchBooks = async () => {\n      const response = await fetch(queryURL);\n      const payload = await response.json();\n      setBooks(payload || []);\n    };\n    fetchBooks();\n  },[]);\n\n  const deleteBook = async (id) => {\n    setBooks(books.filter((book) => book._id !== id));\n    const queryURL = `/api/books/${id}`;\n    const config = {\n      method: \"DELETE\",\n    };\n    const response = await fetch(queryURL, config);\n    const payload = await response.json();\n    return payload\n  };\n\n  return (\n  <Container>\n    <Row>\n        <h4>Saved Books</h4>\n        {books.length > 0 ? (\n          books.map((book) => (\n            <Card key={book._id} style={{ width: \"100%\", flexDirection: \"row\" }}>\n              <Card.Img className='col-xs-4 col-sm-3 col-md-3 col-lg-3' variant=\"top\" src={ book.image ? book.image : \"https://picsum.photos/200/300\"} />\n              <Card.Body className='col-xs-8 col-sm-9 col-md-9 col-lg-9'>\n                <Card.Title>{book.title}</Card.Title>\n                <Card.Text>\n                  Written by:{\" \"}\n                  {book.authors && book.authors.length > 1\n                  ? book.authors.join(\", \") : book.authors}\n                    {book.description}\n                </Card.Text>\n                <Button variant=\"secondary\" href={book.link}>View on Google Books</Button>{\" \"}\n                <Button variant=\"danger\" onClick={() => deleteBook(book._id)}>delete book</Button>\n              </Card.Body>\n            </Card>\n          ))\n        ) : (\n            <p>Looks like you haven't saved any books yet. When you save your favourite books they will appear here.</p>\n            )}\n    </Row>\n  </Container>\n  );\n};\n\nexport default SavedBookCard;"]},"metadata":{},"sourceType":"module"}